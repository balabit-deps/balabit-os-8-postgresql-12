From 7beb2af5e635304334820895e49662fbf08a3702 Mon Sep 17 00:00:00 2001
From: Andres Freund <andres@anarazel.de>
Date: Mon, 10 Feb 2025 12:09:23 -0500
Subject: [PATCH] Fix type in test_escape test

On machines where char is unsigned this could lead to option parsing looping
endlessly. It's also too narrow a type on other hardware.

Found via Tom Lane's monitoring of the buildfarm.

Reported-by: Tom Lane <tgl@sss.pgh.pa.us>
Security: CVE-2025-1094
Backpatch-through: 13
---
 src/test/modules/test_escape/test_escape.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/test/modules/test_escape/test_escape.c b/src/test/modules/test_escape/test_escape.c
index 6654ab1dbe7d3..3ed70436155ab 100644
--- a/src/test/modules/test_escape/test_escape.c
+++ b/src/test/modules/test_escape/test_escape.c
@@ -740,7 +740,7 @@ int
 main(int argc, char *argv[])
 {
 	pe_test_config tc = {0};
-	char		c;
+	int			c;
 	int			option_index;
 
 	static const struct option long_options[] = {
